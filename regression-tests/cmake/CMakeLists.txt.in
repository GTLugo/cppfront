cmake_minimum_required(VERSION 3.23)
project(test-case)

if (WIN32)
    set(CMAKE_OBJECT_PATH_MAX 260)
endif ()

find_package(cppfront REQUIRED)

add_executable(test-case "@ARG_SOURCE@")
target_compile_options(
    test-case
    PRIVATE
    "$<$<CXX_COMPILER_ID:MSVC>:/experimental:module>"
)
if (MSVC AND (MSVC_TOOLSET_VERSION LESS 143))
    # need -std:c++latest on VS 2019 and below
    # TODO: consider making this a more precise usage requirement on cppfront_cpp2util
    target_compile_features(test-case PRIVATE cxx_std_23)
endif ()
